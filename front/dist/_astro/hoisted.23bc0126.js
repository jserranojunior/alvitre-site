import"https://code.iconify.design/iconify-icon/1.0.2/iconify-icon.min.js";function g(){const o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i;return navigator.userAgent.match(o)!==null}function f(o,e){const t=e?"whatsapp://send?phone=5511946439695":"https://web.whatsapp.com/send?phone=5511946439695";o.forEach(n=>{n.href=t})}function y(){const o=document.querySelectorAll(".whatsapp"),e=g();return f(o,e),o}function w(){return new Promise((o,e)=>{let t=null;"serviceWorker"in navigator&&"Notification"in window?navigator.serviceWorker.register("sw.js").then(n=>{console.log("Cache registrado com sucesso"),t=n,console.log("swRegistration",t),o(t)}).catch(n=>{console.log("Erro ao registrar o cache",n),e(n)}):(console.log("CLIENTE: O service worker ou notificações não são suportados."),e(new Error("Service Worker ou Notificações não suportados")))})}function h(){let o;const e=document.querySelector(".btn-install-pwa"),t=document.querySelector(".div-install-pwa");if(t){const r=i=>{i.preventDefault(),o=i,t.style.display="block"};window.addEventListener("beforeinstallprompt",r)}e&&(console.log("Disponível para instalação"),e.addEventListener("click",()=>{t&&(t.style.display="none"),o&&o.prompt()}));const n=document.querySelector(".btn-pwa-close");n&&n.addEventListener("click",()=>{t&&(t.style.display="none")})}async function m(){console.log("Solicitando permissões de notificação");try{const o=await Notification.requestPermission();console.log(o==="granted"?"Permissão de notificação concedida":"Permissão já concedida")}catch(o){console.error("Erro ao solicitar permissão de notificação:",o)}}function v(o){if(o)return{body:"",icon:"/static/logo/png/alvitre.png",image:"/static/logo/png/logo-alvitre-dark-mode-retangulo-arrendodado.png",badge:"/static/logo/png/logo-circulo-de-fundo.png",actions:[{action:"close",title:"Fechar"}],requireInteraction:!0,silent:!1,timestamp:Date.now()}}const b=()=>{console.log("Iniciando leitura do arquivo");function o(r){const i="=".repeat((4-r.length%4)%4),u=(r+i).replace(/\-/g,"+").replace(/_/g,"/"),c=atob(u),p=new Uint8Array(c.length);for(let s=0;s<c.length;++s)p[s]=c.charCodeAt(s);return p}const e="vW3CmWp9VWGrVHHEMZoRR7VoFg2bV6MyABqjz6fzmFQ";let t;t=o(e);function n(){console.log(t),console.log("NOTIFY ######"+e),navigator.serviceWorker.ready.then(r=>{r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(i=>{console.log("Subscription:",i)}).catch(i=>{console.error("Erro ao se inscrever:",i)})})}n()};let a=null,l;const A=()=>{w().then(e=>{a=e,h(),m(),b()});const o=document.querySelector(".btn-notify");o&&o.addEventListener("click",()=>{a&&(l=v(a),l.body="FUNCIONANDO PASSANDO O PARAMETRO AQUI",a.showNotification("Alvitre",l))})};function E(){const o=document.querySelector("#totop");o&&o.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}const d="G-P7E03M70BX";function N(){const o=document.createElement("script");o.src=`https://www.googletagmanager.com/gtag/js?id=${d}`,o.async=!0,document.head.appendChild(o),window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config",d)}y();A();E();N();
